kind: pipeline
type: docker
name: default

steps:
- name: docker
  image: plugins/docker
  settings:
    repo: ensaas/k8s-routines
    username: ensaas
    password:
      from_secret: docker_password
    tags:
      - latest
      - 0.2.6
- name: deploy
  image: ensaas/kubectl-alpine
  commands:
  - kubectl config use-context $CURRENT_CONTEXT
  - kubectl config view
  # - kubectl config apply -f k8s/ --namespace=$NAMESPACE
  environment:
    CURRENT_CONTEXT: 6e0745d0-5c25-11ea-b898-fa99721571bc-eks004
    NAMESPACE: devspace